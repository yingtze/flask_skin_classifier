<!DOCTYPE html>
<html lang="{{ lang }}">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ translations.title }}</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'system-ui', '-apple-system', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/custom.css') }}">
</head>

<body class="bg-[#0b1120] text-slate-100 min-h-screen flex flex-col font-sans antialiased" x-data="skinAnalyzer()"
    x-init="init()">

    <!-- Background Decoration -->
    <div class="fixed inset-0 -z-10 overflow-hidden pointer-events-none">
        <div class="absolute -top-40 -left-40 w-[500px] h-[500px] bg-blue-600/8 rounded-full blur-3xl"></div>
        <div class="absolute -top-20 -right-40 w-[400px] h-[400px] bg-indigo-600/8 rounded-full blur-3xl"></div>
        <div class="absolute -bottom-40 left-1/3 w-[500px] h-[500px] bg-cyan-600/5 rounded-full blur-3xl"></div>
    </div>

    <!-- Toast Notification -->
    <div class="fixed top-20 right-5 z-50 transform transition-all duration-300" x-show="toast.show"
        x-transition:enter="translate-x-full opacity-0" x-transition:enter-end="translate-x-0 opacity-100"
        x-transition:leave="translate-x-0 opacity-100" x-transition:leave-end="translate-x-full opacity-0"
        style="display: none;"> <!-- style mencegah flash sebelum alpine load -->

        <div class="bg-gray-800 border border-white/10 rounded-xl shadow-2xl p-4 flex items-center gap-3 min-w-[300px]">
            <div class="p-2 rounded-full"
                :class="toast.type === 'error' ? 'bg-red-500/20 text-red-400' : 'bg-green-500/20 text-green-400'">
                <!-- Icon Success -->
                <svg x-show="toast.type !== 'error'" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
                    viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                </svg>
                <!-- Icon Error -->
                <svg x-show="toast.type === 'error'" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
                    viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
            </div>
            <div>
                <h4 class="text-sm font-semibold text-white" x-text="toast.type === 'error' ? 'Error' : 'Success'"></h4>
                <p class="text-xs text-slate-400" x-text="toast.message"></p>
            </div>
            <button @click="toast.show = false" class="ml-auto text-slate-500 hover:text-white transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
        </div>
    </div>

    <!-- Header -->
    <header class="sticky top-0 z-50 bg-[#0b1120]/80 backdrop-blur-xl border-b border-white/5">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 h-16 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div class="bg-gradient-to-br from-blue-500 to-cyan-400 p-2 rounded-xl shadow-lg shadow-blue-500/20">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z" />
                    </svg>
                </div>
                <div>
                    <h1 class="text-base font-bold text-white tracking-tight" x-text="t('header')"></h1>
                    <p class="text-[11px] text-slate-400 font-medium" x-html="t('header_subtitle')"></p>
                </div>
            </div>

            <!-- Language Toggle -->
            <div class="flex items-center gap-1 bg-white/5 p-1 rounded-lg border border-white/5">
                <button @click="toggleLang('en')"
                    class="px-3 py-1.5 text-xs font-semibold rounded-md transition-all duration-200"
                    :class="lang === 'en' ? 'bg-blue-500/20 text-blue-300 border border-blue-500/30' : 'text-slate-500 hover:text-slate-300'">
                    EN
                </button>
                <button @click="toggleLang('id')"
                    class="px-3 py-1.5 text-xs font-semibold rounded-md transition-all duration-200"
                    :class="lang === 'id' ? 'bg-blue-500/20 text-blue-300 border border-blue-500/30' : 'text-slate-500 hover:text-slate-300'">
                    ID
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow max-w-6xl mx-auto px-4 sm:px-6 py-6 w-full gap-6 grid grid-cols-1 lg:grid-cols-12">

        <!-- Left Column: Upload & Tips -->
        <div class="lg:col-span-5 space-y-5">

            <!-- Upload Card -->
            <div class="bg-[#111827] rounded-2xl p-5 border border-white/5 relative overflow-hidden">
                <div class="absolute top-0 left-0 w-full h-0.5 bg-gradient-to-r from-blue-500 via-cyan-400 to-blue-500">
                </div>

                <h2 class="text-sm font-semibold text-slate-200 mb-4 flex items-center gap-2 uppercase tracking-wider">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-blue-400" fill="none"
                        viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                    </svg>
                    <span x-text="t('input_label')"></span>
                </h2>

                <!-- Upload Area -->
                <div id="upload-area"
                    class="border-2 border-dashed border-gray-700 rounded-xl bg-gray-900/50 hover:bg-gray-800/50 hover:border-blue-500/50 transition-all duration-300 cursor-pointer relative min-h-[280px] flex flex-col items-center justify-center text-center p-6"
                    @click="document.getElementById('image-upload').click()"
                    @dragover.prevent="$el.classList.add('border-blue-500')"
                    @dragleave="$el.classList.remove('border-blue-500')"
                    @drop.prevent="$el.classList.remove('border-blue-500'); handleDrop($event)">

                    <input type="file" id="image-upload" accept="image/*" class="hidden" @change="handleUpload">

                    <!-- Placeholder State -->
                    <div x-show="!previewUrl" x-transition:enter="transition ease-out duration-300"
                        x-transition:enter-start="opacity-0 scale-90" x-transition:enter-end="opacity-100 scale-100"
                        class="pointer-events-none">
                        <div
                            class="w-14 h-14 bg-blue-500/10 border border-blue-500/20 rounded-2xl flex items-center justify-center mx-auto mb-4 text-blue-400">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor" stroke-width="1.5">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                            </svg>
                        </div>
                        <p class="text-sm font-medium text-slate-300" x-text="t('click_upload')"></p>
                        <p class="text-xs text-slate-500 mt-1.5" x-text="t('file_hint')"></p>
                    </div>

                    <!-- Image Preview Container -->
                    <div x-show="previewUrl" x-transition:enter="transition ease-out duration-300"
                        x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100"
                        class="absolute inset-0 rounded-xl overflow-hidden bg-gray-950 group/preview block">

                        <img :src="previewUrl" class="w-full h-full object-contain" alt="Preview">

                        <!-- Remove Button (Refactored) -->
                        <button type="button" :aria-label="t('remove_label')" @click.stop="removeImage()"
                            @keydown.enter.stop="removeImage()" class="absolute top-3 right-3 w-8 h-8 rounded-full bg-black/60 text-slate-200 
                                   flex items-center justify-center
                                   opacity-0 group-hover/preview:opacity-100 
                                   hover:bg-red-500 hover:text-white hover:scale-110 
                                   focus:opacity-100 focus:outline-none focus:ring-2 focus:ring-red-500/50 
                                   transition-all duration-200 z-20 backdrop-blur-md border border-white/10 shadow-sm">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor" stroke-width="2.5">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                            </svg>
                        </button>

                        <!-- Scanning Animation -->
                        <div x-show="status === 'analyzing'" class="absolute inset-0 z-10 bg-black/30">
                            <div class="scan-line"></div>
                        </div>
                    </div>
                </div>

                <!-- Action Button -->
                <button @click="analyze()" :disabled="!previewUrl || status === 'analyzing'"
                    class="w-full mt-4 bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-500 hover:to-blue-400 text-white font-semibold py-3 px-4 rounded-xl shadow-lg shadow-blue-600/20 transform transition-all active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-sm">

                    <!-- Icon Analyze -->
                    <svg x-show="status !== 'analyzing'" xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none"
                        viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                    </svg>

                    <!-- Icon Loading -->
                    <svg x-show="status === 'analyzing'" class="animate-spin -ml-1 h-4 w-4 text-white"
                        xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4">
                        </circle>
                        <path class="opacity-75" fill="currentColor"
                            d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
                        </path>
                    </svg>

                    <span x-text="status === 'analyzing' ? t('analyzing_btn') : t('analyze_btn')"></span>
                </button>
            </div>

            <!-- Tips Card -->
            <div class="bg-[#111827] rounded-2xl p-5 border border-white/5 border-l-2 border-l-amber-500/60">
                <h4 class="text-xs font-bold text-amber-400 uppercase tracking-wider flex items-center gap-2 mb-3">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                    </svg>
                    <span x-text="t('tips_title')"></span>
                </h4>
                <div class="text-sm text-slate-400 leading-relaxed space-y-1.5" x-html="t('tips_content')"></div>
            </div>

            <!-- Disclaimer Card (Mobile) -->
            <div class="lg:hidden bg-[#111827] rounded-2xl p-4 border border-white/5">
                <p class="text-xs text-slate-500 leading-relaxed">
                    <strong class="text-slate-400" x-text="t('disclaimer_title') + ':'"></strong>
                    <span x-text="t('disclaimer_text')"></span>
                </p>
            </div>
        </div>

        <!-- Right Column: Results -->
        <div class="lg:col-span-7">
            <div
                class="bg-[#111827] rounded-2xl p-6 sm:p-8 h-full min-h-[480px] flex flex-col justify-center items-center text-center relative border border-white/5 transition-all">

                <!-- Empty State -->
                <div x-show="status === 'idle'" class="max-w-sm mx-auto">
                    <div
                        class="w-20 h-20 bg-gray-800/80 rounded-2xl flex items-center justify-center mx-auto mb-5 text-gray-600 border border-white/5">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor" stroke-width="1.5">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                        </svg>
                    </div>
                    <h3 class="text-lg font-semibold text-slate-300" x-text="t('ready_title')"></h3>
                    <p class="text-sm text-slate-400 mt-2 leading-relaxed" x-text="t('ready_desc')"></p>
                </div>

                <!-- Loading State -->
                <div x-show="status === 'analyzing'" class="text-center z-20">
                    <div class="relative w-16 h-16 mx-auto mb-5">
                        <div class="pulse-ring"></div>
                        <div class="absolute inset-0 rounded-full border-[3px] border-gray-700"></div>
                        <div
                            class="absolute inset-0 rounded-full border-[3px] border-blue-500 border-t-transparent animate-spin">
                        </div>
                    </div>
                    <h3 class="text-base font-semibold text-slate-200 animate-pulse" x-text="t('loading_title')"></h3>
                    <p class="text-sm text-slate-400 mt-1.5" x-text="t('loading_desc')"></p>
                </div>

                <!-- Result Content -->
                <div x-show="status === 'success' && result" class="w-full text-left" style="display: none;">

                    <!-- Header with Confidence Ring -->
                    <div
                        class="flex flex-col sm:flex-row items-center sm:items-start gap-5 mb-6 pb-6 border-b border-white/5">

                        <!-- Confidence Ring -->
                        <div class="relative w-20 h-20 flex-shrink-0">
                            <svg class="w-full h-full" viewBox="0 0 96 96">
                                <circle cx="48" cy="48" r="40" stroke="#1e293b" stroke-width="6" fill="transparent" />
                                <circle cx="48" cy="48" r="40" stroke="#3b82f6" stroke-width="6" fill="transparent"
                                    :stroke-dasharray="`${circumference} ${circumference}`"
                                    :stroke-dashoffset="getConfidenceDashOffset()"
                                    class="progress-ring__circle transition-all duration-1000 ease-out"
                                    stroke-linecap="round" />
                            </svg>
                            <div class="absolute inset-0 flex items-center justify-center flex-col">
                                <span class="text-lg font-bold text-white">
                                    <span x-text="percent > 99 ? 99 : percent.toFixed(1)"></span>%
                                </span>
                                <span class="text-[9px] uppercase font-bold text-slate-500 tracking-wider"
                                    x-text="t('confidence_label')"></span>
                            </div>
                        </div>

                        <!-- Diagnosis Text -->
                        <div class="flex-grow text-center sm:text-left">
                            <span
                                class="inline-block px-2.5 py-1 bg-blue-500/10 text-blue-400 rounded-md text-[10px] font-bold uppercase tracking-wider mb-2 border border-blue-500/20"
                                x-text="t('primary_diagnosis')"></span>
                            <h2 class="text-2xl font-bold text-white mb-1.5" x-text="result?.name"></h2>
                            <p class="text-sm text-slate-400 leading-relaxed" x-text="result?.description"></p>
                        </div>
                    </div>

                    <!-- Details Grid -->
                    <div class="grid grid-cols-2 gap-4 mb-6">
                        <!-- Severity Badge -->
                        <div class="bg-gray-900/60 p-4 rounded-xl border border-white/5">
                            <h4 class="text-[10px] uppercase font-bold text-slate-500 tracking-wider mb-2"
                                x-text="t('severity_label')"></h4>
                            <div class="flex items-center gap-2">
                                <span class="w-2.5 h-2.5 rounded-full"
                                    :class="getSeverityColor(result?.severity)"></span>
                                <span class="text-sm font-medium text-slate-200" x-text="result?.severity"></span>
                            </div>
                        </div>

                        <!-- Action Badge -->
                        <div class="bg-gray-900/60 p-4 rounded-xl border border-white/5">
                            <h4 class="text-[10px] uppercase font-bold text-slate-500 tracking-wider mb-2"
                                x-text="t('consult_label')"></h4>
                            <div class="flex items-center gap-2">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 text-blue-400 flex-shrink-0"
                                    fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round"
                                        d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                </svg>
                                <span class="text-sm font-medium text-slate-200" x-text="result?.action"></span>
                            </div>
                        </div>
                    </div>

                    <!-- Probability Bars -->
                    <div>
                        <h4 class="text-xs font-bold text-slate-400 uppercase tracking-wider border-b border-white/5 pb-2 mb-4"
                            x-text="t('output_title')"></h4>
                        <div class="space-y-3">
                            <template x-for="item in result?.sorted_probs" :key="item[0]">
                                <div>
                                    <div class="flex items-center justify-between text-xs mb-1">
                                        <span class="font-medium text-slate-300 capitalize" x-text="item[0]"></span>
                                        <span class="text-slate-400 font-mono"
                                            x-text="(item[1] * 100).toFixed(1) + '%'"></span>
                                    </div>
                                    <div class="w-full bg-gray-800 rounded-full h-1.5 overflow-hidden">
                                        <div class="h-full rounded-full transition-all duration-1000 ease-out"
                                            :style="`width: ${item[1] * 100}%; background-color: ${getClassColor(item[0])}`">
                                        </div>
                                    </div>
                                </div>
                            </template>
                        </div>
                    </div>

                    <!-- Disclaimer -->
                    <div class="hidden lg:block mt-6 pt-5 border-t border-white/5 text-center">
                        <p class="text-[11px] text-slate-500 max-w-md mx-auto leading-relaxed">
                            <strong class="text-slate-400" x-text="t('disclaimer_title') + ':'"></strong>
                            <span x-text="t('disclaimer_text')"></span>
                        </p>
                    </div>

                </div>
            </div>
        </div>

    </main>

    <!-- Lower Content: Tabs -->
    <section class="max-w-6xl mx-auto px-4 sm:px-6 pb-10 w-full">
        <div class="bg-[#111827] rounded-2xl overflow-hidden border border-white/5">
            <!-- Tabs Nav -->
            <div class="flex border-b border-white/5">
                <button @click="tab = 'examples'"
                    class="px-5 py-3 text-xs font-semibold uppercase tracking-wider transition-colors"
                    :class="tab === 'examples' ? 'text-blue-400 border-b-2 border-blue-500 bg-white/[0.02]' : 'text-slate-500 hover:text-slate-300'"
                    x-text="t('tabs.examples')">
                </button>
                <button @click="tab = 'info'"
                    class="px-5 py-3 text-xs font-semibold uppercase tracking-wider transition-colors"
                    :class="tab === 'info' ? 'text-blue-400 border-b-2 border-blue-500 bg-white/[0.02]' : 'text-slate-500 hover:text-slate-300'"
                    x-text="t('tabs.info')">
                </button>
            </div>

            <!-- Tab Content area -->
            <div class="p-5 min-h-[250px]">
                <!-- Examples Tab -->
                <div x-show="tab === 'examples'" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-3">
                    <template x-for="ex in examples" :key="ex.class">
                        <div class="group relative aspect-square rounded-xl overflow-hidden cursor-pointer bg-gray-900 border border-white/5 hover:border-blue-500/30 transition-all"
                            @click="loadExampleImage(ex.url, ex.class)">
                            <img :src="ex.url"
                                class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"
                                :alt="ex.class">
                            <div
                                class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-end justify-center p-2">
                                <span class="text-white text-[10px] font-bold uppercase tracking-wider"
                                    x-text="ex.class"></span>
                            </div>
                        </div>
                    </template>

                    <div x-show="examples.length === 0" class="col-span-full text-center text-slate-500 py-8 text-sm"
                        x-text="t('loading_examples')"></div>
                </div>

                <!-- Info Tab -->
                <div x-show="tab === 'info'" class="space-y-5" style="display: none;">
                    <h3 class="text-base font-bold text-slate-200" x-text="t('model_stats')"></h3>
                    <div class="text-sm text-slate-400 leading-relaxed" x-html="t('model_info_text')"></div>

                    <div class="overflow-x-auto rounded-xl border border-white/5">
                        <table class="min-w-full divide-y divide-white/5">
                            <thead class="bg-gray-900/60">
                                <tr>
                                    <template x-for="col in t('table_cols')" :key="col">
                                        <th class="px-5 py-3 text-left text-[10px] font-bold text-slate-500 uppercase tracking-wider"
                                            x-text="col"></th>
                                    </template>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-white/5">
                                {% set perf_data = [
                                ["acne", "100.00%", "100.00%", "100.00%"],
                                ["eksim", "100.00%", "96.77%", "98.36%"],
                                ["herpes", "96.77%", "100.00%", "98.36%"],
                                ["panu", "100.00%", "100.00%", "100.00%"],
                                ["rosacea", "100.00%", "100.00%", "100.00%"]
                                ] %}
                                {% for row in perf_data %}
                                <tr class="hover:bg-white/[0.02] transition-colors">
                                    <td
                                        class="px-5 py-3 whitespace-nowrap text-sm font-medium text-slate-300 capitalize">
                                        <!-- Note: Complex string manipulation in Alpine can be hard, 
                                             so for static tables we often keep server rendered parts if they don't change dynamically.
                                             However, for 't()' to work we need dynamic text.
                                             We will use a small inline x-text for the label translate key. -->
                                        <span x-text="t('classes.{{ row[0] }}')"></span>
                                    </td>
                                    <td class="px-5 py-3 whitespace-nowrap text-sm text-slate-400 font-mono">{{ row[1]
                                        }}</td>
                                    <td class="px-5 py-3 whitespace-nowrap text-sm text-slate-400 font-mono">{{ row[2]
                                        }}</td>
                                    <td class="px-5 py-3 whitespace-nowrap text-sm text-slate-400 font-mono">{{ row[3]
                                        }}</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="border-t border-white/5 py-4">
        <p class="text-center text-[11px] text-slate-600" x-text="t('footer')"></p>
    </footer>

    <!-- Alpine.js -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

    <!-- App Logic -->
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>

</body>

<!-- Background Decoration -->
<div class="fixed inset-0 -z-10 overflow-hidden pointer-events-none">
    <div class="absolute -top-40 -left-40 w-[500px] h-[500px] bg-blue-600/8 rounded-full blur-3xl"></div>
    <div class="absolute -top-20 -right-40 w-[400px] h-[400px] bg-indigo-600/8 rounded-full blur-3xl"></div>
    <div class="absolute -bottom-40 left-1/3 w-[500px] h-[500px] bg-cyan-600/5 rounded-full blur-3xl"></div>
</div>

<!-- Toast Notification -->
<div id="toast-container"
    class="fixed top-20 right-5 z-50 transform transition-all duration-300 translate-x-full opacity-0">
    <div class="bg-gray-800 border border-white/10 rounded-xl shadow-2xl p-4 flex items-center gap-3 min-w-[300px]">
        <div class="bg-green-500/20 p-2 rounded-full text-green-400">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
            </svg>
        </div>
        <div>
            <h4 class="text-sm font-semibold text-white">Success</h4>
            <p id="toast-message" class="text-xs text-gray-400">Action completed successfully.</p>
        </div>
        <button onclick="hideToast()" class="ml-auto text-gray-500 hover:text-white transition-colors">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
                stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
        </button>
    </div>
</div>

<!-- Header -->
<header class="sticky top-0 z-50 bg-[#0b1120]/80 backdrop-blur-xl border-b border-white/5">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 h-16 flex items-center justify-between">
        <div class="flex items-center gap-3">
            <div class="bg-gradient-to-br from-blue-500 to-cyan-400 p-2 rounded-xl shadow-lg shadow-blue-500/20">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z" />
                </svg>
            </div>
            <div>
                <h1 class="text-base font-bold text-white tracking-tight">{{ translations.header }}</h1>
                <p class="text-[11px] text-gray-400 font-medium">{{ translations.header_subtitle|safe }}</p>
            </div>
        </div>

        <!-- Language Toggle -->
        <div class="flex items-center gap-1 bg-white/5 p-1 rounded-lg border border-white/5">
            <button
                class="lang-btn px-3 py-1.5 text-xs font-semibold rounded-md transition-all duration-200 {% if lang == 'en' %}bg-blue-500/20 text-blue-300 border border-blue-500/30{% else %}text-gray-500 hover:text-gray-300{% endif %}"
                data-lang="en">
                EN
            </button>
            <button
                class="lang-btn px-3 py-1.5 text-xs font-semibold rounded-md transition-all duration-200 {% if lang == 'id' %}bg-blue-500/20 text-blue-300 border border-blue-500/30{% else %}text-gray-500 hover:text-gray-300{% endif %}"
                data-lang="id">
                ID
            </button>
        </div>
    </div>
</header>

<!-- Main Content -->
<main class="flex-grow max-w-6xl mx-auto px-4 sm:px-6 py-6 w-full gap-6 grid grid-cols-1 lg:grid-cols-12">

    <!-- Left Column: Upload & Tips -->
    <div class="lg:col-span-5 space-y-5">

        <!-- Upload Card -->
        <div class="bg-[#111827] rounded-2xl p-5 border border-white/5 relative overflow-hidden">
            <div class="absolute top-0 left-0 w-full h-0.5 bg-gradient-to-r from-blue-500 via-cyan-400 to-blue-500">
            </div>

            <h2 class="text-sm font-semibold text-gray-200 mb-4 flex items-center gap-2 uppercase tracking-wider">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-blue-400" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                </svg>
                {{ translations.input_label }}
            </h2>

            <!-- Upload Area -->
            <div id="upload-area"
                class="border-2 border-dashed border-gray-700 rounded-xl bg-gray-900/50 hover:bg-gray-800/50 hover:border-blue-500/50 transition-all duration-300 cursor-pointer relative min-h-[280px] flex flex-col items-center justify-center text-center p-6">
                <input type="file" id="image-upload" accept="image/*" class="hidden">

                <!-- Placeholder State -->
                <div id="upload-placeholder" class="pointer-events-none transition-opacity duration-300">
                    <div
                        class="w-14 h-14 bg-blue-500/10 border border-blue-500/20 rounded-2xl flex items-center justify-center mx-auto mb-4 text-blue-400">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor" stroke-width="1.5">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                        </svg>
                    </div>
                    <p class="text-sm font-medium text-gray-300">{{ translations.click_upload }}</p>
                    <p class="text-xs text-gray-500 mt-1.5">{{ translations.file_hint }}</p>
                </div>

                <!-- Image Preview Container -->
                <div id="preview-container"
                    class="absolute inset-0 hidden rounded-xl overflow-hidden bg-gray-950 group/preview">
                    <img id="preview-image" class="w-full h-full object-contain" alt="Preview">

                    <!-- Remove Button -->
                    <button id="remove-btn" type="button" aria-label="Remove uploaded image"
                        class="absolute top-3 right-3 p-1.5 rounded-full bg-black/40 text-gray-200 opacity-0 group-hover/preview:opacity-100 hover:bg-red-500 hover:text-white hover:scale-110 transition-all duration-200 z-20 backdrop-blur-md border border-white/10 focus:opacity-100 focus:outline-none focus:ring-2 focus:ring-red-500/50 shadow-sm">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor" stroke-width="2.5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>

                    <!-- Scanning Animation -->
                    <div id="scan-overlay" class="absolute inset-0 hidden z-10 bg-black/30">
                        <div class="scan-line"></div>
                    </div>
                </div>
            </div>

            <!-- Action Button -->
            <button id="analyze-btn"
                class="w-full mt-4 bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-500 hover:to-blue-400 text-white font-semibold py-3 px-4 rounded-xl shadow-lg shadow-blue-600/20 transform transition-all active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-sm">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                </svg>
                <span>{{ translations.analyze_btn }}</span>
            </button>
        </div>

        <!-- Tips Card -->
        <div class="bg-[#111827] rounded-2xl p-5 border border-white/5 border-l-2 border-l-amber-500/60">
            <h4 class="text-xs font-bold text-amber-400 uppercase tracking-wider flex items-center gap-2 mb-3">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                </svg>
                {{ translations.tips_title }}
            </h4>
            <div class="text-sm text-gray-400 leading-relaxed space-y-1.5">
                {{ translations.tips_content|safe }}
            </div>
        </div>

        <!-- Disclaimer Card (Mobile) -->
        <div class="lg:hidden bg-[#111827] rounded-2xl p-4 border border-white/5">
            <p class="text-xs text-gray-500 leading-relaxed">
                <strong class="text-gray-400">{{ translations.disclaimer_title }}:</strong>
                {{ translations.disclaimer_text }}
            </p>
        </div>
    </div>

    <!-- Right Column: Results -->
    <div class="lg:col-span-7">
        <div id="result-container"
            class="bg-[#111827] rounded-2xl p-6 sm:p-8 h-full min-h-[480px] flex flex-col justify-center items-center text-center relative border border-white/5 transition-all">

            <!-- Empty State -->
            <div id="empty-state" class="max-w-sm mx-auto">
                <div
                    class="w-20 h-20 bg-gray-800/80 rounded-2xl flex items-center justify-center mx-auto mb-5 text-gray-600 border border-white/5">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor" stroke-width="1.5">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                    </svg>
                </div>
                <h3 class="text-lg font-semibold text-gray-300">{{ translations.ready_title }}</h3>
                <p class="text-sm text-gray-500 mt-2 leading-relaxed">{{ translations.ready_desc }}</p>
            </div>

            <!-- Loading State -->
            <div id="loading-state" class="hidden text-center z-20">
                <div class="relative w-16 h-16 mx-auto mb-5">
                    <div class="pulse-ring"></div>
                    <div class="absolute inset-0 rounded-full border-[3px] border-gray-700"></div>
                    <div
                        class="absolute inset-0 rounded-full border-[3px] border-blue-500 border-t-transparent animate-spin">
                    </div>
                </div>
                <h3 class="text-base font-semibold text-gray-200 animate-pulse">{{ translations.loading_title }}
                </h3>
                <p class="text-sm text-gray-500 mt-1.5">{{ translations.loading_desc }}</p>
            </div>

            <!-- Result Content -->
            <div id="result-content" class="hidden w-full text-left">

                <!-- Header with Confidence Ring -->
                <div
                    class="flex flex-col sm:flex-row items-center sm:items-start gap-5 mb-6 pb-6 border-b border-white/5">

                    <!-- Confidence Ring -->
                    <div class="relative w-20 h-20 flex-shrink-0">
                        <svg class="w-full h-full" viewBox="0 0 96 96">
                            <circle cx="48" cy="48" r="40" stroke="#1e293b" stroke-width="6" fill="transparent" />
                            <circle id="confidence-ring" cx="48" cy="48" r="40" stroke="#3b82f6" stroke-width="6"
                                fill="transparent" stroke-dasharray="251.2" stroke-dashoffset="251.2"
                                class="progress-ring__circle" stroke-linecap="round" />
                        </svg>
                        <div class="absolute inset-0 flex items-center justify-center flex-col">
                            <span id="confidence-value" class="text-lg font-bold text-white">0%</span>
                            <span class="text-[9px] uppercase font-bold text-gray-500 tracking-wider">{{
                                translations.confidence_label }}</span>
                        </div>
                    </div>

                    <!-- Diagnosis Text -->
                    <div class="flex-grow text-center sm:text-left">
                        <span
                            class="inline-block px-2.5 py-1 bg-blue-500/10 text-blue-400 rounded-md text-[10px] font-bold uppercase tracking-wider mb-2 border border-blue-500/20">
                            {{ translations.primary_diagnosis }}
                        </span>
                        <h2 id="diagnosis-name" class="text-2xl font-bold text-white mb-1.5">Diagnosis Name</h2>
                        <p id="diagnosis-desc" class="text-sm text-gray-400 leading-relaxed">Description goes here.
                        </p>
                    </div>
                </div>

                <!-- Details Grid -->
                <div class="grid grid-cols-2 gap-4 mb-6">
                    <!-- Severity Badge -->
                    <div class="bg-gray-900/60 p-4 rounded-xl border border-white/5">
                        <h4 class="text-[10px] uppercase font-bold text-gray-500 tracking-wider mb-2">
                            {{ translations.severity_label }}</h4>
                        <div class="flex items-center gap-2">
                            <span id="severity-indicator" class="w-2.5 h-2.5 rounded-full bg-green-500"></span>
                            <span id="severity-text" class="text-sm font-medium text-gray-200">Moderate</span>
                        </div>
                    </div>

                    <!-- Action Badge -->
                    <div class="bg-gray-900/60 p-4 rounded-xl border border-white/5">
                        <h4 class="text-[10px] uppercase font-bold text-gray-500 tracking-wider mb-2">
                            {{ translations.consult_label }}</h4>
                        <div class="flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 text-blue-400 flex-shrink-0"
                                fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                            <span id="action-text" class="text-sm font-medium text-gray-200">Consult Doctor</span>
                        </div>
                    </div>
                </div>

                <!-- Probability Bars -->
                <div>
                    <h4
                        class="text-xs font-bold text-gray-400 uppercase tracking-wider border-b border-white/5 pb-2 mb-4">
                        {{ translations.output_title }}</h4>
                    <div id="probability-bars" class="space-y-3">
                        <!-- Bars injected via JS -->
                    </div>
                </div>

                <!-- Disclaimer -->
                <div class="hidden lg:block mt-6 pt-5 border-t border-white/5 text-center">
                    <p class="text-[11px] text-gray-600 max-w-md mx-auto leading-relaxed">
                        <strong class="text-gray-500">{{ translations.disclaimer_title }}:</strong>
                        {{ translations.disclaimer_text }}
                    </p>
                </div>

            </div>
        </div>
    </div>

</main>

<!-- Lower Content: Tabs -->
<section class="max-w-6xl mx-auto px-4 sm:px-6 pb-10 w-full">
    <div class="bg-[#111827] rounded-2xl overflow-hidden border border-white/5">
        <!-- Tabs Nav -->
        <div class="flex border-b border-white/5">
            <button
                class="tab-btn px-5 py-3 text-xs font-semibold text-blue-400 border-b-2 border-blue-500 bg-white/[0.02] uppercase tracking-wider"
                data-tab="examples">
                {{ translations.tabs.examples }}
            </button>
            <button
                class="tab-btn px-5 py-3 text-xs font-semibold text-gray-500 hover:text-gray-300 transition-colors uppercase tracking-wider"
                data-tab="info">
                {{ translations.tabs.info }}
            </button>
        </div>

        <!-- Tab Content area -->
        <div class="p-5 min-h-[250px]">
            <!-- Examples Tab -->
            <div id="tab-examples" class="tab-content block">
                <div id="examples-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-3">
                    <p class="col-span-full text-center text-gray-500 py-8 text-sm">
                        {{ translations.loading_examples }}</p>
                </div>
            </div>

            <!-- Info Tab -->
            <div id="tab-info" class="tab-content hidden space-y-5">
                <h3 class="text-base font-bold text-gray-200">{{ translations.model_stats }}</h3>
                <div class="text-sm text-gray-400 leading-relaxed">
                    {{ translations.model_info_text|safe }}
                </div>

                <div class="overflow-x-auto rounded-xl border border-white/5">
                    <table class="min-w-full divide-y divide-white/5">
                        <thead class="bg-gray-900/60">
                            <tr>
                                <th
                                    class="px-5 py-3 text-left text-[10px] font-bold text-gray-500 uppercase tracking-wider">
                                    {{ translations.table_cols[0] }}</th>
                                <th
                                    class="px-5 py-3 text-left text-[10px] font-bold text-gray-500 uppercase tracking-wider">
                                    {{ translations.table_cols[1] }}</th>
                                <th
                                    class="px-5 py-3 text-left text-[10px] font-bold text-gray-500 uppercase tracking-wider">
                                    {{ translations.table_cols[2] }}</th>
                                <th
                                    class="px-5 py-3 text-left text-[10px] font-bold text-gray-500 uppercase tracking-wider">
                                    {{ translations.table_cols[3] }}</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-white/5">
                            {% set perf_data = [
                            ["acne", "100.00%", "100.00%", "100.00%"],
                            ["eksim", "100.00%", "96.77%", "98.36%"],
                            ["herpes", "96.77%", "100.00%", "98.36%"],
                            ["panu", "100.00%", "100.00%", "100.00%"],
                            ["rosacea", "100.00%", "100.00%", "100.00%"]
                            ] %}
                            {% for row in perf_data %}
                            <tr class="hover:bg-white/[0.02] transition-colors">
                                <td class="px-5 py-3 whitespace-nowrap text-sm font-medium text-gray-300 capitalize">
                                    {{ translations.classes[row[0]].name.split('(')[0].strip() }}</td>
                                <td class="px-5 py-3 whitespace-nowrap text-sm text-gray-400 font-mono">{{ row[1]
                                    }}</td>
                                <td class="px-5 py-3 whitespace-nowrap text-sm text-gray-400 font-mono">{{ row[2]
                                    }}</td>
                                <td class="px-5 py-3 whitespace-nowrap text-sm text-gray-400 font-mono">{{ row[3]
                                    }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Footer -->
<footer class="border-t border-white/5 py-4">
    <p class="text-center text-[11px] text-gray-600">{{ translations.footer }}</p>
</footer>

<!-- JS -->
<script src="{{ url_for('static', filename='js/main.js') }}"></script>

</body>

</html>